-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.admin
(
    id integer,
    name character varying(40) COLLATE pg_catalog."default",
    m_no character(10) COLLATE pg_catalog."default",
    designation character varying(20) COLLATE pg_catalog."default",
    u_id integer NOT NULL,
    CONSTRAINT admin_pkey PRIMARY KEY (u_id),
    CONSTRAINT new UNIQUE (u_id)
);

CREATE TABLE IF NOT EXISTS public.cus_bill_pos
(
    b_id integer NOT NULL DEFAULT nextval('cus_bill_pos_b_id_seq'::regclass),
    pos_id integer,
    CONSTRAINT cus_bill_pos_pkey PRIMARY KEY (b_id)
);

CREATE TABLE IF NOT EXISTS public.customer
(
    address character varying(100) COLLATE pg_catalog."default",
    name character varying(40) COLLATE pg_catalog."default",
    m_no character(10) COLLATE pg_catalog."default",
    cid integer NOT NULL DEFAULT nextval('customer_cid_seq'::regclass),
    CONSTRAINT customer_pkey PRIMARY KEY (cid)
);

CREATE TABLE IF NOT EXISTS public.inventory
(
    id character varying(20) COLLATE pg_catalog."default" NOT NULL,
    name character(40) COLLATE pg_catalog."default",
    min_quantity integer,
    reorder_quantity integer,
    actual_quantity integer,
    category character varying(20) COLLATE pg_catalog."default",
    price numeric(16, 2),
    CONSTRAINT inventory_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.login
(
    u_id integer NOT NULL,
    password character varying(20) COLLATE pg_catalog."default",
    type character varying(20) COLLATE pg_catalog."default",
    CONSTRAINT login_pkey PRIMARY KEY (u_id)
);

CREATE TABLE IF NOT EXISTS public.pos
(
    p_id integer NOT NULL,
    name character varying(40) COLLATE pg_catalog."default",
    m_no character(10) COLLATE pg_catalog."default",
    address character varying(100) COLLATE pg_catalog."default",
    u_id integer,
    CONSTRAINT pos_pkey PRIMARY KEY (p_id),
    CONSTRAINT uni UNIQUE (u_id)
);

CREATE TABLE IF NOT EXISTS public.supplier
(
    id integer NOT NULL,
    name character varying(50) COLLATE pg_catalog."default",
    product_name character varying(20) COLLATE pg_catalog."default",
    address character varying(100) COLLATE pg_catalog."default",
    m_no character(10) COLLATE pg_catalog."default",
    CONSTRAINT supplier_pkey PRIMARY KEY (id)
);

ALTER TABLE IF EXISTS public.admin
    ADD CONSTRAINT admin_u_id_fkey FOREIGN KEY (u_id)
    REFERENCES public.login (u_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE SET NULL;
CREATE INDEX IF NOT EXISTS admin_pkey
    ON public.admin(u_id);


ALTER TABLE IF EXISTS public.cus_bill_pos
    ADD CONSTRAINT cus_bill_pos_pos_id_fkey FOREIGN KEY (pos_id)
    REFERENCES public.pos (p_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pos
    ADD CONSTRAINT pos_u_id_fkey FOREIGN KEY (u_id)
    REFERENCES public.login (u_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE SET NULL;
CREATE INDEX IF NOT EXISTS uni
    ON public.pos(u_id);

END;